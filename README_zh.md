![](android_res_export.png)

Android Res Export 是目前 Sketch 平台上最强大的 Android 资源导出插件。

## 功能

- 导出多分辨率位图资源。
- 预览和导出多分辨率点九资源。
- 导出矢量资源（Vector Drawable），支持 Android 7.0 的线性、径向和角度渐变，支持蒙板。
- 导出 App 图标，支持 Android 8.0 自适应图标、圆形图标及旧版图标。
- 查看和导出形状图层的 XML 代码。
- 查看和导出图层的色彩资源代码。
- 界面支持中文和英文。

## 安装

- 推荐在 [Sketch Runner](http://sketchrunner.com/) 搜索 “Android Res Export”。
- 下载 [master.zip](https://github.com/Ashung/Android_Res_Export/archive/master.zip)，解压后，双击 "Android_Res_Export.sketchplugin" 文件，安装插件。

## 插件使用

#### 设计稿使用哪种尺寸

目前设计稿必须是 MDPI (1x) 尺寸，建议使用 Sketch 默认的画板预设。使用其他尺寸的设计稿会导致导出的资源尺寸更大。

### 切换插件语言

执行菜单 “Plugins” - “Android Res Export” - “Preferences”，在弹出窗口的 “Change Language” 下拉菜单中选择相应的语言，目前只支持英文和简体中文。

### 资源命名

位图资源和矢量资源的资源命名由切片图层名决定，点九资源由 patch 和 content 图层组的上一级图层组名决定。为了让设计师更显得专业，减轻开发重命名工作，以及增进同事间友谊，在新建这三种资源和导出时，会强制使用符合 Android 规定的命名，中文字符将被删除。

默写图层可能含有 “/” 符号，可以在插件的 “参数设置” 中，选择将最后一段分组作为资源名称，或将其替换为下划线。

### 新建资源与导出资源

目前插件支持四个类型的 Android 资源，位图资源（即通常的 PNG 格式资源）、点九资源（Nine-Patch）、矢量资源（Vector Drawable）和应用图标。这四类资源需要先从菜单新建资源，然后才能导出。前三种类型也可以通过复制已有的资源，或手动创建图层结构和切片设置一样的图层组，也可以选择多个图层组或图层是批量创建。由于应用图标是创建一页图标模版，必须新建图标或复制已有图标模版分页。

前三种类型在执行相应的导出菜单时，如果选择了部分相应的资源图层，此时只会导出选中的资源，而当没有选择任何图层时，则会导出当前文件内所有相应的资源。而导出应用图标，则必须当前处于应用图标模版页。

在插件的 “参数设置” 中可以选择需要导出哪几个分辨率，这个设置影响位图资源和点九资源，矢量资源不受尺寸限制，而应用图标则会导出完整资源。另外还可以在 “参数设置” 选择是否导出完成后打开资源所在文件夹。

#### 导出点九资源

新建点九资源会默认画出图形四边基础的黑线，需要根据具体情况修改黑线的位置和长度，插件的 “点九图片预览” 菜单可以大致预览图形拉伸效果（预览效果可能与实际效果有误差），并从预览窗口导出当前资源。

#### 导出矢量资源

导出矢量资源更能需要安装 [Node.js](https://nodejs.org/en/) 8.0 以上环境和最新版本 [svg2vectordrawable](https://github.com/Ashung/svg2vectordrawable) 包。可以从[国内镜像站](https://npm.taobao.org/mirrors/node/)下载 PKG 格式安装包文件，按照安装向导安装 Node.js。完成完成之后在终端输入以下命名来安装 svg2vectordrawable。

```shell
sudo npm install svg2vectordrawable -g
```

插件会将包含有设为 SVG 的切片的组作为矢量资源，如果文档中有真实的 SVG 资源，在导出时请选则要导出的矢量资源。

Android 矢量资源不同于 SVG，插件使用图层的 SVG 作为参考生成矢量资源。矢量资源不支持图片、文本、投影、模糊、图片填充、图层混合等效果，这些特性会被忽略，设计矢量资源时，尽可能将形状图层合并和 flatten，并删除没必要图层组。

Sketch 当前版本包含角度渐变图层时产生的 SVG 有错误，所以如果目前导出的矢量资源会出现超过 2 个角度渐变色，使用桶一渐变色的现象，此问题需要等到下一版 Sketch 修复时再修改，目前一个矢量资源内只能包含一种角度渐变色，线性渐变和径向渐变不存在此类问题。

在插件的 “参数设置” 中可以选择矢量资源的保存路径，路径填充设置为 Even-Odd 和带渐变的矢量资源是 Android 7.0 增加的支持，建议包含此两种设置资源时选择保存到以 “-v24” 结尾的文件夹中。

### 保存形状 XML 代码

Android 的 [Shape drawable](https://developer.android.com/guide/topics/resources/drawable-resource#Shape) 支持矩形、圆形、水平线和圆形，但目前插件仅支持矩形和圆形，可以包含单色填充、圆角、实线或虚线的描边、最多三种颜色的线性、径向和角度渐变等。选中一个矩形或圆形图层，运行插件的 “查看形状资源代码”，如果图层包含不支持的效果会出现提示信息。

## 版权声明

MIT

## 捐助

使用 [微信](http://ashung.github.io/donate.html) 或 [支付宝](http://ashung.github.io/donate.html) 捐助作者。
